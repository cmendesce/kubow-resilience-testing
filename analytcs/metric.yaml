scenarios:
  - scenario:
    name: 'step_pattern'
    steps:
      - step:
        time: 300
        users: 400
      - step:
        time: 300
        users: 600
      - step:
        time: 300
        users: 800
      - step:
        time: 300
        users: 1000
      - step:
        time: 300
        users: 1200
      - step:
        time: 300
        users: 1000
      - step:
        time: 300
        users: 800
      - step:
        time: 300
        users: 600
      - step:
        time: 300
        users: 400

metrics:
  - metric:
    name: 'rps_caddy'
    description: 'Requests vs seconds'
    query: 'rate(caddy_http_request_duration_seconds_count{host="ingress-nginx.default.svc"}[30s])'
    columns: 'pod,namespace'
  - metric:
    name: 'response_time_kubeznn'
    description: 'Requests vs seconds'
    query: 'histogram_quantile(0.95, rate(caddy_http_request_duration_seconds_bucket{host="ingress-nginx.default.svc"}[30s]))'
    columns: 'pod,namespace'
  - metric:
    name: 'response_time_ingress'
    description: 'Requests vs seconds'
    query: 'histogram_quantile(0.95, rate(nginx_ingress_controller_request_duration_seconds_bucket{host="ingress-nginx.default.svc"}[30s]))'
    columns: 'pod,namespace,status,service,method'
    