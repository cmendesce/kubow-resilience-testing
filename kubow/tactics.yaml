apiVersion: v1
kind: ConfigMap
metadata:
  name: tactics
data:
  tactics.s: |
    module kubow.strategies;
    import model "KubeZnnSystem:Acme" { KubeZnnSystem as M, KubernetesFam as K };

    tactic addReplicas(int count) {
      int replicas = M.kubeZnnD.desiredReplicas;
      condition {
        M.kubeZnnD.maxReplicas > M.kubeZnnD.desiredReplicas;
      }
      action {
        M.scaleUp(M.kubeZnnD, count);
      }
      effect @[10000] {
        replicas' + count == M.kubeZnnD.desiredReplicas;
      }
    }

    tactic removeReplicas(int count) {
      int replicas = M.kubeZnnD.desiredReplicas;
      condition {
        M.kubeZnnD.minReplicas < M.kubeZnnD.desiredReplicas;
      }
      action {
        M.scaleDown(M.kubeZnnD, count);
      }
      effect @[10000] {
        replicas' - count == M.kubeZnnD.desiredReplicas;
      }
    }
